!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=6)}([function(e,t){e.exports={LOCAL_STORAGE_DATA_KEY:"YACEP_EMO_DATA",LOCAL_STORAGE_INFO_KEY:"YACEP_EMO_INFO",LOCAL_STORAGE_GROUP_MENTION:"CHATPP_GROUP_MENTION",LOCAL_STORAGE_ROOM_SHORTCUT:"CHATPP_ROOM_SHORTCUT",LOCAL_STORAGE_DISABLE_NOTIFY_ROOM:"CHATPP_DISABLE_NOTIFY_ROOM",CHROME_LOCAL_KEY:"CHATPP_CHROME_LOCAL_DATA",CHROME_SYNC_KEY:"CHATPP_CHROME_SYNC_DATA",CHROME_SYNC_GROUP_KEY:"CHATPP_CHROME_SYNC_GROUP",CHROME_SYNC_ROOM_KEY:"CHATPP_CHROME_SYNC_ROOM",CHROME_SYNC_DISABLE_NOTIFY_ROOM_KEY:"CHATPP_CHROME_SYNC_DISABLE_NOTIFY_ROOM",DEFAULT_DATA_URL:"https://dl.dropboxusercontent.com/s/lmxis68cfh4v1ho/default.json?dl=1",ADVERTISEMENT_URL:"https://dl.dropboxusercontent.com/s/jsmceot0pqi8lpk/chatppad.json?dl=1",VERSION_CHROME:"VERSION_CHROME",VERSION_FIREFOX:"VERSION_FIREFOX",VERSION_NAME_DEV:"dev",VERSION_NAME_RELEASE:"final",DEFAULT_IMG_HOST:"https://chatpp.thangtd.com/",DELAY_TIME:6e3,FORCE_TURN_OFF_THUMBNAIL:1,ADVERTISEMENT_LOAD_TIMEOUT:18e5,TO_ALL_MARK:"TO ALL >>>"}},function(e,t,n){var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var r=n(0),a=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.version=r.VERSION_CHROME,this.app_detail=this.getAppDetail(),this.official_emoticons_data={Default:{name:"Default",link:"https://dl.dropboxusercontent.com/s/lmxis68cfh4v1ho/default.json?dl=1",description:"The default Emoticons data of Chat++"},Vietnamese:{name:"Vietnamese",link:"https://dl.dropboxusercontent.com/s/2b085bilbno4ri1/vietnamese.json?dl=1",description:"Yet another data for people who want to use Vietnamese Emoticons"},Japanese:{name:"Japanese",link:"https://dl.dropboxusercontent.com/s/fdq05pwwtsccrn6/japanese.json?dl=1",description:"Yet another data for people who want to use Japanese Emoticons"},Skype:{name:"Skype",link:"https://dl.dropboxusercontent.com/s/8ew2mdh0v2vcad8/skype.json?dl=1",description:"Skype Original Emoticons"}}}return o(e,[{key:"isChromeVersion",value:function(){return this.version===r.VERSION_CHROME}},{key:"isFirefoxVersion",value:function(){return this.version===r.VERSION_FIREFOX}},{key:"isDevVersion",value:function(){var e=this.app_detail.name;return-1!==e.indexOf(r.VERSION_NAME_DEV,e.length-r.VERSION_NAME_DEV.length)}},{key:"checkDevVersionInternal",value:function(){return localStorage.chatpp_version_name===r.VERSION_NAME_DEV}},{key:"getStorage",value:function(e){return!e&&this.isChromeVersion()?chrome.storage.sync:chrome.storage.local}},{key:"sync",value:function(e,t,n){var o={};o[e]=t,this.getStorage().set(o,function(){n&&n()})}},{key:"getEmoticonDataUrl",value:function(e,t){return e&&this.official_emoticons_data[e]&&(t=this.official_emoticons_data[e].link),t?t.replace("http://i.imgur.com/","https://i.imgur.com/"):null}},{key:"getObjectLength",value:function(e){return Object.keys(e).length}},{key:"htmlEncode",value:function(e){return $("<div/>").text(e).html()}},{key:"getEmoUrl",value:function(e){var t=r.DEFAULT_IMG_HOST+"img/emoticons/"+e;return 0!=e.indexOf("https://")&&0!=e.indexOf("http://")||(t=e),this.htmlEncode(t)}},{key:"parseRoomId",value:function(e){var t=e.match(/\d+/g);if(!t||0==t.length)return null;t=t[0];return/^[0-9]{6,10}$/g.test(t)?t:null}},{key:"reload",value:function(){location.reload()}},{key:"getAppDetail",value:function(){return chrome.app.getDetails()}},{key:"getAppVersion",value:function(){return this.app_detail.version}},{key:"getAppVersionName",value:function(){return this.isDevVersion()?r.VERSION_NAME_DEV:r.VERSION_NAME_RELEASE}},{key:"getAppFullName",value:function(){var e=this.getAppVersionName();return this.app_detail.short_name+" "+this.app_detail.version+" "+e}},{key:"openNewUrl",value:function(e){chrome.tabs.create({url:e})}},{key:"getExtensionPageUrl",value:function(e){return chrome.extension.getURL(e)}},{key:"openNewExtensionPageUrl",value:function(e){this.openNewUrl(this.getExtensionPageUrl(e))}},{key:"validateUrl",value:function(e){return/(https):\/\/(\w+:?\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)}},{key:"validateDropboxUrl",value:function(e){if(!this.validateUrl(e))return!1;var t=!0,n=!1,o=void 0;try{for(var r,a=["https://dl.dropboxusercontent.com/","https://www.dropbox.com/"][Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var i=r.value;if(e.startsWith(i))return!0}}catch(e){n=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw o}}return!1}},{key:"isPage",value:function(e){return $("#page-name").data("page-name")===e}},{key:"setPageTitle",value:function(){$("#chatpp_name").html(this.getAppFullName())}},{key:"setStatus",value:function(e,t){-1===e.indexOf("_status")&&(e+="_status"),localStorage[e]=!!t}},{key:"getStatus",value:function(e){return-1===e.indexOf("_status")&&(e+="_status"),"true"===localStorage[e]||!0===localStorage[e]}},{key:"regexEscape",value:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"generateEmoticonRegex",value:function(e,t){return t=t||this.htmlEncode(this.regexEscape(e)),new RegExp(t,"g")}},{key:"random",value:function(e){return e.length?e[Math.floor(Math.random()*e.length)]:null}},{key:"randomString",value:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}}]),e}());e.exports=a},function(e,t,n){var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var r=n(1),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storage=r.getStorage(t)}return o(e,[{key:"get",value:function(e,t){this.storage.get(e,function(n){n=n?n[e]:void 0,t(n)})}},{key:"set",value:function(e,t,n){var o={};o[e]=t,this.storage.set(o,function(){n&&n()})}},{key:"setData",value:function(e,t){this.storage.set(e,function(){t&&t()})}}]),e}();e.exports=a},function(e,t,n){var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var r=n(2),a=n(0),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storage=new r(!0),this.key=a.CHROME_LOCAL_KEY}return o(e,[{key:"get",value:function(e){this.storage.get(this.key,e)}},{key:"set",value:function(e,t){this.set(this.key,e,t)}},{key:"setData",value:function(e,t){this.storage.setData(e,t)}}]),e}();e.exports=i},,,function(e,t,n){e.exports=n(7)},function(e,t,n){var o=n(1),r=n(2),a=n(3),i=n(0),s={};function u(e){var t,n,o=["emoticon","mention","shortcut"];for(var r in o)t=o[r],void 0===(n=e[o[r]+"_status"])||!1!==n&&"false"!==n?$("#"+t+"-status").removeClass().addClass("text-primary").html("ENABLED"):$("#"+t+"-status").removeClass().addClass("text-danger").html("DISABLED")}$(function(){var e;(e=new a).get(function(t){void 0===(s=$.isEmptyObject(t)?{}:t)[i.CHROME_LOCAL_KEY]&&(s[i.CHROME_LOCAL_KEY]={}),s[i.CHROME_LOCAL_KEY].version=o.getAppVersion(),s[i.CHROME_LOCAL_KEY].version_name=o.getAppVersionName(),chrome.browserAction.getBadgeText({},function(e){"new"===e&&(chrome.browserAction.setBadgeText({text:""}),o.openNewUrl("html/change_logs.html"))}),e.setData(s)}),$("#chatpp_version").html(o.getAppFullName());["setting","emoticon","room","group","shortcut","change_logs","features","notification"].forEach(function(e){var t="html/"+e+".html";$("#"+e+"_page").click(function(){o.openNewUrl(t)})}),$(".ext-url").click(function(e){o.openNewUrl($(e.currentTarget).attr("href"))}),chrome.storage.onChanged.addListener(function(e){var t=e[i.CHROME_SYNC_KEY];$.isEmptyObject(t)||$.isEmptyObject(t.newValue)||u(t=t.newValue)}),(new r).get(i.CHROME_SYNC_KEY,function(e){$.isEmptyObject(e)?o.openNewExtensionPageUrl(o.app_detail.options_page):u(e)})})}]);